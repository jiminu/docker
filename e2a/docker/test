# docker build -t jiminu/express:0.1 -f dockerfile-express ../

FROM ubuntu:20.04
ENV DEBIAN_FRONTEND=noninteractive
# essential install
RUN rm /bin/sh && ln -s /bin/bash /bin/sh
RUN apt-get update \ 
    && apt-get install -y \
    git


RUN mkdir -p -m 0600 /root/.ssh
RUN ssh-keyscan github.com >> /root/.ssh/known_hosts
ADD ../config/id_rsa /root/.ssh/id_rsa
# RUN chmod 600 /root/.ssh/id_rsa

RUN apt-get clean

RUN git config --global user.name "jiminu"
RUN git config --global user.email "jmu417@gmail.com"
RUN git clone --single-branch git@github.com:jiminu/e2a_express.git ./app
WORKDIR /app
RUN npm install
# CMD tail -f /dev/null